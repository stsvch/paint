<UserControl x:Class="WpfClient.Controls.PalettePanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <!--
        Контрол сам не задаёт Width/Height.
        Всё решает родитель (колонка Grid и т.п.).
    -->
    <Border Style="{StaticResource PanelBorderStyle}">
        <Grid>
            <Grid.RowDefinitions>
                <!-- Заголовок -->
                <RowDefinition Height="Auto" />
                <!-- Список цветов, занимает всё оставшееся -->
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Заголовок -->
            <TextBlock Grid.Row="0"
                       Text="Цвета"
                       Style="{StaticResource PanelHeaderTextStyle}"
                       Margin="0,0,0,12" />

            <!-- Список цветов -->
            <ListBox Grid.Row="1"
                     ItemsSource="{Binding Palette}"
                     ItemTemplate="{StaticResource PaletteItemTemplate}"
                     ItemContainerStyle="{StaticResource PaletteItemContainerStyle}"
                     SelectedIndex="{Binding SelectedColorIndex, Mode=TwoWay}"
                     Background="Transparent"
                     BorderThickness="0"
                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                     ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                <!-- тонкие скроллбары -->
                <ListBox.Resources>
                    <Style TargetType="ScrollBar"
                           BasedOn="{StaticResource ThinScrollBarStyle}" />
                </ListBox.Resources>

                <!-- раскладка элементов: плитки, переносятся по строкам -->
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel ItemWidth="56"
                                   ItemHeight="56"
                                   MinWidth="56" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
            </ListBox>
        </Grid>
    </Border>
</UserControl>
